module ECF8F24(
    input  wire sysclk,    // 12 MHz system clock
    input  wire MCLR,      
    output wire DLG_LED,   // Debug LED output (1Hz clock)
    // Control inputs/outputs
    inout  wire PRTA1,     
    inout  wire PRTA2,     
    inout  wire PRTA3,     
    inout  wire PRTA4,    
    inout  wire PRTA5,     
    inout wire PRTA6,     
    inout wire PRTA7,     
    inout wire PRTA8,    
    inout  wire PRTB1,     
    inout  wire PRTB2,     
    inout  wire PRTB3,     
    inout  wire PRTB4,     
    inout  wire PRTB5,     
    inout  wire PRTB6,     
    inout  wire PRTB7,     
    inout  wire PRTB8,     
    inout  wire D1,        
    inout  wire D2,        
    inout  wire D3,        
    inout  wire D4,        
    inout  wire D5,        
    inout  wire D6,        
    inout  wire D7,       
    inout  wire D8,    
    
    output wire Add1, 
    output wire Add2, 
    output wire Add3, 
    output wire Add4,
    output wire Add5, 
    output wire Add6, 
    output wire Add7, 
    output wire Add8,  
//    output wire Add9, 
//    output wire Add10, 
//    output wire Add11, 
//    output wire Add12,    
//    output wire Add13,    
    
    input wire RxPin,
    output wire TxPin,
    
    output wire TCA,
    output wire TCB
    
);
    wire RedCLK;    
      wire [3:0] RXC;      
      wire [3:0] RXCn;  
    
    ClockDivider clk_div (
        .clk_in(sysclk),
        .clk_out(RedCLK)
    );
    
    
    assign DLG_LED = RedCLK;
   
    wire [7:0] DataBus = {D8, D7, D6, D5, D4, D3, D2, D1};  
//    wire [7:0] DataBus = 8'd24;
    wire [7:0] Debug = {Add8, Add7, Add6, Add5, Add4, Add3, Add2, Add1};
    wire [7:0] PRTA = {PRTA8, PRTA7, PRTA6, PRTA5, PRTA4, PRTA3, PRTA2, PRTA1};  
    wire [7:0] PRTB = {PRTB8, PRTB7, PRTB6, PRTB5, PRTB4, PRTB3, PRTB2, PRTB1};  
    wire [4:0] DP_Flags;
    

// declare wires from your RxCTRL
 AddressableRegion InternalPeripherals(
    .SYSCLK(sysclk),
    .CLK_IN(RedCLK),
    .MCLR(MCLR),
    
    .WriteAdd(WriteAdd),
    .ReadAdd(ReadAdd),
    .DataBus(DataBus),
    
    .DPTR_A(),
    .DPTR_B(),
    
//    //Interrupts
//    output wire T1_int,
//    output wire T2_int,
//    output wire T3_int,
//    output wire T4_int,
//    output wire UART_int,
    
    .DP_Flags(DP_Flags),
    
    
//    //GPIO
//    .PORTA(PRTA),
//    .PORTB(PRTB),
    .TCA(TCA),
    .TCB(TCB),
    .Tx(TxPin),
    .Rx(RxPin),


    .ReadEMPTY(PRTA8),
    .WriteEMPTY(PRTA7),
    .Debuglines(Debug)


    
    );
    
    
    wire [7:0] WriteAdd;
        // 8-bit Register built from individual Register cells
    Register8bit WriteAddBus (
        .D(DataBus),    // 8-bit data input bus
        .CLK(RedCLK),        // Clock input
        .STR(PRTA1),        // Store enable
        .RST(PRTA3),        // Asynchronous reset
        .Q(WriteAdd)    // 8-bit register output
        
    );        
    
    
    wire [7:0] ReadAdd;
    Register8bit ReadAddBus (
        .D(DataBus),    // 8-bit data input bus
        .CLK(RedCLK),        // Clock input
        .STR(PRTA2),        // Store enable
        .RST(PRTA3),        // Asynchronous reset
        .Q(ReadAdd)    // 8-bit register output
    );
    
endmodule

